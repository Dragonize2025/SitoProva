<!DOCTYPE html>
<html lang="it">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Matteo Mattielli - Fotografo</title>
    <link rel="stylesheet" href="index.css">
    <style>
    :root{
      --width: 100%;
      --height: 60vh;            /* cambia qui l'altezza del contenitore */
      --fade-duration: 2000ms;   /* durata dissolvenza */
      --display-duration: 5000ms;/* tempo immagine visibile (include fade) */
    }

    body{ margin:0; display:flex; align-items:center; justify-content:center; height:100vh; background:#111; font-family:system-ui,Segoe UI,Roboto,"Helvetica Neue",Arial; }

    .slideshow{
      width:var(--width);
      max-width:1000px;
      height:var(--height);
      position:relative;
      overflow:hidden;
      border-radius:12px;
      box-shadow: 0 10px 30px rgba(0,0,0,0.6);
      background:#000;
    }

    .slide{
      position:absolute;
      inset:0; /* top:0; right:0; bottom:0; left:0; */
      object-fit:cover;
      width:100%;
      height:100%;
      opacity:0;
      transition: opacity var(--fade-duration) ease-in-out;
      will-change: opacity;
      -webkit-backface-visibility:hidden;
      backface-visibility:hidden;
    }

    .slide.visible{ opacity:1; }

    /* Optional overlay text / caption */
    .caption{
      position:absolute;
      left:16px;
      bottom:16px;
      color:white;
      text-shadow:0 2px 6px rgba(0,0,0,0.7);
      font-size:clamp(14px,2vw,18px);
      background:rgba(0,0,0,0.25);
      padding:8px 12px;
      border-radius:8px;
      backdrop-filter: blur(4px);
    }

    /* Small control hint */
    .hint{
      position:absolute;
      right:12px;
      top:12px;
      color:rgba(255,255,255,0.8);
      font-size:12px;
      background:rgba(0,0,0,0.25);
      padding:6px 8px;
      border-radius:6px;
    }
  </style>
</head>
<body>

    <nav class="navbar">
        <div class="logo">
            <a href="#">MATTEO MATTIELLI</a>
        </div>
        <ul class="menu">
            <li class="dropdown">
                <a href="#lavori">Lavori</a>
                <ul class="dropdown-menu">
                    <li><a href="#ritratti">Ritratti</a></li>
                    <li><a href="#paesaggi">Paesaggi</a></li>
                </ul>
            </li>
            <li class="dropdown">
                <a href="#mostre">Mostre</a>
                <ul class="dropdown-menu">
                    <li><a href="mostra2024.html">Mostra 2024</a></li>
                    <li><a href="mostra2023.html">Mostra 2023</a></li>
                </ul>
            </li>
            <li><a href="#varie">Varie</a></li>
            <li><a href="#progetti">Progetti</a></li>
            <li><a href="#contatti">Contatti</a></li>
        </ul>
    </nav>

    <div class="hero-container">
        <div class="slideshow-background"></div>
        <div class="slideshow-wrapper">
            <div class="slide" data-index="0">
                <img src="img/foto1.jpg" alt="Photo 1">
            </div>
            <div class="slide" data-index="1">
                <img src="img/foto2.jpg" alt="Photo 2">
            </div>
            <div class="slide" data-index="2">
                <img src="img/foto3.jpg" alt="Photo 3">
            </div>
            <div class="slide" data-index="3">
                <img src="img/foto1.jpg" alt="Photo 1">
            </div>
        </div>

        <div class="text-overlay">
            <h1>MATTEO MATTIELLI</h1>
            <p>FOTOGRAFO</p>
        </div>
    </div>

    <section id="lavori">
        <h2>Lavori</h2>
        <p>Una selezione dei miei lavori, suddivisi per categorie.</p>
        
        
    </section>

    <section id="mostre">
        <h2>Mostre</h2>
        <p>In questa sezione pubblicherò le mostre fotografiche che ho realizzato nel tempo.</p>
        
        <div id="mostra2024" class="exhibition-subsection">
            <h3>Mostra 2024</h3>
            <div class="exhibition-grid">
                <a href="mostra2024.html" class="exhibition-item">
                    <img src="img/mostra2024/mostra2024-1.jpg" alt="Mostra 2024 - 1">
                </a>
                <a href="mostra2024.html" class="exhibition-item">
                    <img src="img/mostra2024/mostra2024-2.jpg" alt="Mostra 2024 - 2">
                </a>
            </div>
        </div>

        <div id="mostra2023" class="exhibition-subsection">
            <h3>Mostra 2023</h3>
            <div class="exhibition-grid">
                <a href="mostra2023.html" class="exhibition-item">
                    <img src="img/mostra2023/mostra2023-1.jpg" alt="Mostra 2023 - 1">
                </a>
                <a href="mostra2023.html" class="exhibition-item">
                    <img src="img/mostra2023/mostra2023-2.jpg" alt="Mostra 2023 - 2">
                </a>
            </div>
        </div>
    </section>

    <section id="varie">
        <h2>Varie</h2>
        <p>Una raccolta di fotografie di varia natura, singole o in piccole serie.</p>
        <div id="ritratti" class="work-subsection">
            <h3>Ritratti</h3>
            <div class="work-grid">
                <a href="ritratti.html" class="work-item">
                    <div class="slideshow" id="slideshow" aria-roledescription="carousel">
    <!-- JS aggiungerà qui le <img> -->
    <div class="hint">Passa il mouse per mettere in pausa</div>
    <div class="caption" id="caption" aria-live="polite"></div>
  </div>

  <script>
    // ==== CONFIG ====
    const images = [
      { src: 'img/ritratti/t01.jpg', alt: 'Descrizione immagine 1', caption: 'Prima immagine' },
      { src: 'img/ritratti/t02.jpg', alt: 'Descrizione immagine 2', caption: 'Seconda immagine' },
      { src: 'img/ritratti/t03.jpg', alt: 'Descrizione immagine 3', caption: 'Terza immagine' },
      { src: 'img/ritratti/t04.jpg', alt: 'Descrizione immagine 4', caption: 'Quarta immagine' }
      // aggiungi altri oggetti {src, alt, caption} quanto vuoi
    ];

    // **SHUFFLE (randomize) the images array**
    function shuffleArray(array) {
      const shuffled = [...array];
      for (let i = shuffled.length - 1; i > 0; i--) {
        const j = Math.floor(Math.random() * (i + 1));
        [shuffled[i], shuffled[j]] = [shuffled[j], shuffled[i]];
      }
      return shuffled;
    }

    const shuffledImages = shuffleArray(images);

    // Durata (ms) — tieni sincronizzato con i CSS se cambiati
    const displayDuration = parseInt(getComputedStyle(document.documentElement).getPropertyValue('--display-duration')) || 5000;
    const fadeDuration = parseInt(getComputedStyle(document.documentElement).getPropertyValue('--fade-duration')) || 2000;

    // ==== LOGICA SLIDESHOW ====
    const container = document.getElementById('slideshow');
    const captionEl = document.getElementById('caption');

    // Preload e creazione elementi (using shuffled array)
    const slides = shuffledImages.map((imgObj, i) => {
      const img = document.createElement('img');
      img.className = 'slide';
      img.src = imgObj.src;
      img.alt = imgObj.alt || '';
      img.setAttribute('data-index', i);
      container.appendChild(img);
      return { el: img, meta: imgObj };
    });

    // Show first slide immediately when loaded
    let current = 0;
    slides[current].el.classList.add('visible');
    captionEl.textContent = slides[current].meta.caption || '';

    // Crossfade function
    let intervalId = null;
    let isPaused = false;

    function nextSlide(){
      const prev = current;
      current = (current + 1) % slides.length;
      slides[prev].el.classList.remove('visible');
      slides[current].el.classList.add('visible');
      captionEl.textContent = slides[current].meta.caption || '';
    }

    function start(){
      if(intervalId) clearInterval(intervalId);
      intervalId = setInterval(() => {
        if(!isPaused) nextSlide();
      }, displayDuration);
    }

    function stop(){
      if(intervalId) { clearInterval(intervalId); intervalId = null; }
    }

    // Pause on hover/focus for usability
    container.addEventListener('mouseenter', () => isPaused = true);
    container.addEventListener('mouseleave', () => isPaused = false);
    container.addEventListener('focusin', () => isPaused = true);
    container.addEventListener('focusout', () => isPaused = false);

    // Start slideshow (ensure images are loaded first — basic preload)
    Promise.all(shuffledImages.map(i => new Promise(res => {
      const img = new Image();
      img.src = i.src;
      img.onload = res;
      img.onerror = res;
    }))).then(() => start());

    // Optional: make slideshow keyboard accessible (left/right)
    window.addEventListener('keydown', (e) => {
      if(e.key === 'ArrowRight'){ isPaused = true; nextSlide(); }
      if(e.key === 'ArrowLeft'){ isPaused = true; 
        // previous
        slides[current].el.classList.remove('visible');
        current = (current-1 + slides.length) % slides.length;
        slides[current].el.classList.add('visible');
        captionEl.textContent = slides[current].meta.caption || '';
      }
    });
  </script>

        <div id="paesaggi" class="work-subsection">
            <h3>Paesaggi</h3>
            <div class="work-grid">
                <a href="paesaggi.html" class="work-item">
                    <img id="randomImage1" src="" alt="Immagine casuale" style="width:300px;">

  <script>
    // Lista delle immagini nella cartella
    const images1 = [
        "img/paesaggi/01.jpg",
        "img/paesaggi/02.jpg",
        "img/paesaggi/03.jpg",
        "img/paesaggi/04.jpg",
        "img/paesaggi/05.jpg",
        "img/paesaggi/06.jpg",
        "img/paesaggi/07.jpg",
        "img/paesaggi/08.jpg",
        "img/paesaggi/09.jpg",
        "img/paesaggi/10.jpg",
        "img/paesaggi/11.jpg",
        "img/paesaggi/12.jpg",
        "img/paesaggi/13.jpg" 
    ];

    // Seleziona un'immagine casualmente
    const randomIndex1 = Math.floor(Math.random() * images1.length);
    const randomImage1 = images1[randomIndex1];

    // Imposta l'immagine scelta nell'elemento <img>
    document.getElementById("randomImage1").src = randomImage1;
  </script>
                </a>
            </div>
        </div>
    </section>

    <section id="progetti">
        <h2>Progetti Futuri</h2>
        <p>Idee, sperimentazioni e future direzioni del mio lavoro fotografico.</p>
    </section>

    <section id="contatti">
        <h2>Contatti</h2>
        <p><img src="img/mail.webp" width="25" style="vertical-align: middle;"> Email: <a href="https://mail.google.com/mail/u/0/?view=cm&fs=1&to=mattielliphotos@gmail.com" target="_blank">
            mattielliphotos@gmail.com</a><br>
        <img src="img/telefono.webp" width="25" style="vertical-align: middle;"> Telefono: +39 349 267 3517<br>
        <img src="img/instagram.webp" width="25" style="vertical-align: middle;"> Instagram: <a href="https://www.instagram.com/mattielliphotos/" target="_blank">Mattielli Photos</a><br>
        <img src="img/facebook.webp" width="25" style="vertical-align: middle;"> Facebook: <a href="https://www.facebook.com/profile.php?id=61572285960295" target="_blank">Matteo Mattielli</a></p>
    </section>

    <script src="script.js"></script>

</body>
</html>